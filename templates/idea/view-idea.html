{% extends "../layouts/main_layout.html" %}
{% load staticfiles %}

{% block stylesheet %}
<!-- Website Font style -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

<link rel="stylesheet" href="{% static 'css/auth/auth.css' %}">
    <!-- Loading one more time..... -->
    <link rel="stylesheet" href="{% static 'libs/bootstrap/bootstrap.4.1.min.css' %}">
{% endblock %}

{% block headerextra %}
{% endblock %}

{% block content %}

    <div class="container">
    <div class="row">
      <div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
        <div class="card card-signin my-5">
          <div class="card-body">
              <div class="card-title text-center" style="font-weight: normal; margin-bottom: 10px;">{{ idea.title }}</div>
              <div style="margin-bottom: 14px;">{{ idea.idea }}</div>
              <table>
                  <tr>
                  <td style="padding-right: 152px; color: darkblue;">Active:</td>
                    <td>{{ idea.is_active }}</td>
              </tr>
              <tr>
                <td style="color: darkblue;">Date created:</td>
                <td>{{ idea.meta_created_at }}</td>
              </tr>
              <tr>
                <td style="color: darkblue;">Last updated:</td>
                <td>{{ idea.meta_last_updated_at }}</td>
              </tr>
            </table>
              {% if ownsIdea %}
              <div style="margin-top: 15px;">
                {% if campaignId == -1 %}
                  <a class="btn btn-light btn-primary btn-block"
                    href="{% url 'campaignApp:postCampaign' %}?idea={{ idea.id }}">
                    Kickstart Campaign
                  </a>
                {% else %}
                  <a class="btn btn-light btn-primary btn-block"
                    href="{% url 'campaignApp:getCampaignById' campaignId %}">
                    View Campaign
                  </a>
                {% endif %}
              </div>
              {% endif %}
              <button class="btn btn-success btn-block" style="margin-top: 4px;" data-toggle="modal"
                      data-target="#addComment">
                    Add Your Comment
              </button>
              <button class="btn btn-info btn-block" style="margin-top: 4px;" data-toggle="modal"
                      data-target="#viewComments">
                    View Comments
              </button>
              <div class="modal fade" id="addComment" role="dialog">
                  <div class="modal-dialog">
                      <div class="modal-content">
                          <div class="modal-header">
                              <h4 class="modal-title">Add Your Comment</h4>
                          </div>

                          <div class="modal-body">
                              <form id="commentForm" method="post" action="{% url 'commentApp:postComment' %}">
                                  <!--<input maxlength="500" rows="5" type="text" id="commentText" name="comment-rext" class="form-control"
                                         placeholder="Share your opinion and knowledge here!" required>-->
                                  <textarea id="commentText" maxlength="500" style="width: 100%;" name="commentText" rows="8"></textarea>
                              </form>
                              <form id="myform" method="get" action="{% url 'commentApp:postComment' %}">
    <input type="text" name="name" />
</form>

<input type="submit" form="myform" />
                          </div>
                          <div class="modal-footer">
                              <button id="saveComment" form="commentForm" type="submit" disabled class="btn btn-success" data-dismiss="modal">Save</button>
                              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          </div>

                      </div>
                  </div>
              </div>

          </div>
        </div>
      </div>
    </div>
  </div>


{% endblock %}

{% block js %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){

    /* toggle password visibility */
    if('{{error}}'){
    	console.log('Yes');
    }
    else{
    	console.log('No');
    }

    $('#commentText').keyup(function() {
        var empty = false;
        if ($(this).val().length < 2) {
            empty = true;
        }
        if (empty) {
            console.log("EMPTY!");
            $('#saveComment').attr('disabled', 'disabled');
        } else {
            console.log("NON EMPTY!");
            $('#saveComment').removeAttr('disabled');
        }
    });
  });

  /*$( "#saveComment" ).click(function() {

  });*/
</script>
{% endblock %}